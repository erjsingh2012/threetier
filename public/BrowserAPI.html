<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Browser API Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    h1 { color: #333; }
    section { 
      margin-bottom: 20px; 
      padding: 15px; 
      background: #fff; 
      border-radius: 8px; 
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .console {
      background: #222;
      color: #0f0;
      padding: 10px;
      font-family: monospace;
      max-height: 200px;
      overflow-y: auto;
      border-radius: 5px;
    }
    button { margin: 5px; padding: 8px 12px; border-radius: 5px; border: none; cursor: pointer; }
    button:hover { background: #007BFF; color: white; }
  </style>
</head>
<body>
  <h1>Browser API Demo</h1>

  <section id="navigator-info">
    <h2>Navigator Info</h2>
    <pre id="navigatorDisplay"></pre>
  </section>

  <section id="location-info">
    <h2>Geolocation</h2>
    <button id="getLocationBtn">Get Location</button>
    <pre id="locationDisplay">Click the button to get your location</pre>
  </section>

  <section id="storage-info">
    <h2>LocalStorage / SessionStorage</h2>
    <button id="saveStorageBtn">Save Data</button>
    <button id="loadStorageBtn">Load Data</button>
    <pre id="storageDisplay"></pre>
  </section>

  <section id="timer-info">
    <h2>Timers</h2>
    <button id="startTimerBtn">Start 5s Timer</button>
    <pre id="timerDisplay"></pre>
  </section>

  <section id="fetch-info">
    <h2>Fetch API</h2>
    <button id="fetchBtn">Fetch Dummy Data</button>
    <pre id="fetchDisplay"></pre>
  </section>

  <section id="console-output">
    <h2>Debug Console</h2>
    <div class="console" id="debugConsole"></div>
  </section>

  <script>
    // Debug console helper
    function log(msg) {
      const consoleEl = document.getElementById('debugConsole');
      consoleEl.textContent += msg + "\n";
      console.log(msg); // Also log to real browser console
      consoleEl.scrollTop = consoleEl.scrollHeight;
    }

    // 1. Navigator API
    const navDisplay = document.getElementById('navigatorDisplay');
    navDisplay.textContent = JSON.stringify({
      appName: navigator.appName,
      appVersion: navigator.appVersion,
      platform: navigator.platform,
      userAgent: navigator.userAgent,
      language: navigator.language,
      online: navigator.onLine
    }, null, 2);
    log("Navigator info displayed.");

    // 2. Geolocation API
    const locationBtn = document.getElementById('getLocationBtn');
    const locationDisplay = document.getElementById('locationDisplay');
    locationBtn.addEventListener('click', () => {
      if (!navigator.geolocation) {
        locationDisplay.textContent = "Geolocation not supported.";
        log("Geolocation not supported.");
        return;
      }
      navigator.geolocation.getCurrentPosition(
        position => {
          const coords = {
            latitude: position.coords.latitude,
            longitude: position.coords.longitude,
            accuracy: position.coords.accuracy
          };
          locationDisplay.textContent = JSON.stringify(coords, null, 2);
          log("Location retrieved: " + JSON.stringify(coords));
        },
        error => {
          locationDisplay.textContent = "Error: " + error.message;
          log("Geolocation error: " + error.message);
        }
      );
    });

    // 3. LocalStorage / SessionStorage
    const saveBtn = document.getElementById('saveStorageBtn');
    const loadBtn = document.getElementById('loadStorageBtn');
    const storageDisplay = document.getElementById('storageDisplay');

    saveBtn.addEventListener('click', () => {
      localStorage.setItem('demoData', JSON.stringify({name: "User", time: new Date()}));
      sessionStorage.setItem('demoData', "Temporary session data");
      storageDisplay.textContent = "Data saved!";
      log("Data saved to localStorage and sessionStorage.");
    });

    loadBtn.addEventListener('click', () => {
      const localData = localStorage.getItem('demoData');
      const sessionData = sessionStorage.getItem('demoData');
      storageDisplay.textContent = `LocalStorage: ${localData}\nSessionStorage: ${sessionData}`;
      log("Data loaded from storage.");
    });

    // 4. Timers
    const startTimerBtn = document.getElementById('startTimerBtn');
    const timerDisplay = document.getElementById('timerDisplay');
    startTimerBtn.addEventListener('click', () => {
      timerDisplay.textContent = "Timer started...";
      log("5-second timer started.");
      setTimeout(() => {
        timerDisplay.textContent = "Timer finished!";
        log("Timer finished after 5 seconds.");
      }, 5000);
    });

    // 5. Fetch API
    const fetchBtn = document.getElementById('fetchBtn');
    const fetchDisplay = document.getElementById('fetchDisplay');
    fetchBtn.addEventListener('click', async () => {
      fetchDisplay.textContent = "Fetching data...";
      log("Fetching dummy data...");
      try {
        const response = await fetch('https://jsonplaceholder.typicode.com/todos/1');
        const data = await response.json();
        fetchDisplay.textContent = JSON.stringify(data, null, 2);
        log("Data fetched: " + JSON.stringify(data));
      } catch (err) {
        fetchDisplay.textContent = "Error fetching data: " + err;
        log("Fetch error: " + err);
      }
    });

    // 6. DOM Events
    log("Browser API demo loaded successfully.");
  </script>
</body>
</html>
